(function(r,m,s){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,polygonOptions:{}},initialize:function(a){L.Util.setOptions(this,a);this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction);this._featureGroup=L.featureGroup();
this._featureGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this);this._nonPointGroup=L.featureGroup();this._nonPointGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this);this._inZoomAnimation=0;this._needsClustering=[];this._needsRemoving=[];this._currentShownBounds=null},addLayer:function(a){if(a instanceof L.LayerGroup){var b=[],c;for(c in a._layers)b.push(a._layers[c]);return this.addLayers(b)}if(!a.getLatLng)return this._nonPointGroup.addLayer(a),this;if(!this._map)return this._needsClustering.push(a),
this;if(this.hasLayer(a))return this;this._unspiderfy&&this._unspiderfy();this._addLayer(a,this._maxZoom);b=a;c=this._map.getZoom();if(a.__parent)for(;b.__parent._zoom>=c;)b=b.__parent;this._currentShownBounds.contains(b.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(a,b):this._animationAddLayerNonAnimated(a,b));return this},removeLayer:function(a){if(!a.getLatLng)return this._nonPointGroup.removeLayer(a),this;if(!this._map)return!this._arraySplice(this._needsClustering,
a)&&this.hasLayer(a)&&this._needsRemoving.push(a),this;if(!a.__parent)return this;this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(a));this._removeLayer(a,!0);this._featureGroup.hasLayer(a)&&(this._featureGroup.removeLayer(a),a.setOpacity&&a.setOpacity(1));return this},addLayers:function(a){var b,c,d,h=this._map,f=this._featureGroup,g=this._nonPointGroup;b=0;for(c=a.length;b<c;b++)if(d=a[b],!d.getLatLng)g.addLayer(d);else if(!this.hasLayer(d))if(h){if(this._addLayer(d,this._maxZoom),d.__parent&&
2===d.__parent.getChildCount()){var e=d.__parent.getAllChildMarkers();f.removeLayer(e[0]===d?e[1]:e[0])}}else this._needsClustering.push(d);h&&(f.eachLayer(function(a){a instanceof L.MarkerCluster&&a._iconNeedsUpdate&&a._updateIcon()}),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds));return this},removeLayers:function(a){var b,c,d,h=this._featureGroup,f=this._nonPointGroup;if(!this._map){b=0;for(c=a.length;b<c;b++)d=a[b],this._arraySplice(this._needsClustering,
d),f.removeLayer(d);return this}b=0;for(c=a.length;b<c;b++)d=a[b],d.__parent?(this._removeLayer(d,!0,!0),h.hasLayer(d)&&(h.removeLayer(d),d.setOpacity&&d.setOpacity(1))):f.removeLayer(d);this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds);h.eachLayer(function(a){a instanceof L.MarkerCluster&&a._updateIcon()});return this},clearLayers:function(){this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered);this._noanimationUnspiderfy&&
this._noanimationUnspiderfy();this._featureGroup.clearLayers();this._nonPointGroup.clearLayers();this.eachLayer(function(a){delete a.__parent});this._map&&this._generateInitialClusters();return this},getBounds:function(){var a=new L.LatLngBounds;if(this._topClusterLevel)a.extend(this._topClusterLevel._bounds);else for(var b=this._needsClustering.length-1;0<=b;b--)a.extend(this._needsClustering[b].getLatLng());b=this._nonPointGroup.getBounds();b.isValid()&&a.extend(b);return a},eachLayer:function(a,
b){var c=this._needsClustering.slice(),d;this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(c);for(d=c.length-1;0<=d;d--)a.call(b,c[d]);this._nonPointGroup.eachLayer(a,b)},hasLayer:function(a){if(!a)return!1;var b,c=this._needsClustering;for(b=c.length-1;0<=b;b--)if(c[b]===a)return!0;c=this._needsRemoving;for(b=c.length-1;0<=b;b--)if(c[b]===a)return!1;return!(!a.__parent||a.__parent._group!==this)||this._nonPointGroup.hasLayer(a)},zoomToShowLayer:function(a,b){var c=function(){if((a._icon||
a.__parent._icon)&&!this._inZoomAnimation)if(this._map.off("moveend",c,this),this.off("animationend",c,this),a._icon)b();else if(a.__parent._icon){var d=function(){this.off("spiderfied",d,this);b()};this.on("spiderfied",d,this);a.__parent.spiderfy()}};a._icon?b():a.__parent._zoom<this._map.getZoom()?(this._map.on("moveend",c,this),a._icon||this._map.panTo(a.getLatLng())):(this._map.on("moveend",c,this),this.on("animationend",c,this),this._map.setView(a.getLatLng(),a.__parent._zoom+1),a.__parent.zoomToBounds())},
onAdd:function(a){this._map=a;var b,c;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";this._featureGroup.onAdd(a);this._nonPointGroup.onAdd(a);this._gridClusters||this._generateInitialClusters();a=0;for(b=this._needsRemoving.length;a<b;a++)c=this._needsRemoving[a],this._removeLayer(c,!0);this._needsRemoving=[];a=0;for(b=this._needsClustering.length;a<b;a++)c=this._needsClustering[a],c.getLatLng?c.__parent||this._addLayer(c,this._maxZoom):this._featureGroup.addLayer(c);this._needsClustering=
[];this._map.on("zoomend",this._zoomEnd,this);this._map.on("moveend",this._moveEnd,this);this._spiderfierOnAdd&&this._spiderfierOnAdd();this._bindEvents();this._zoom=this._map.getZoom();this._currentShownBounds=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)},onRemove:function(a){a.off("zoomend",this._zoomEnd,this);a.off("moveend",this._moveEnd,this);this._unbindEvents();this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",
"");this._spiderfierOnRemove&&this._spiderfierOnRemove();this._featureGroup.onRemove(a);this._nonPointGroup.onRemove(a);this._featureGroup.clearLayers();this._map=null},getVisibleParent:function(a){for(;null!==a&&!a._icon;)a=a.__parent;return a},_arraySplice:function(a,b){for(var c=a.length-1;0<=c;c--)if(a[c]===b)return a.splice(c,1),!0},_removeLayer:function(a,b,c){var d=this._gridClusters,h=this._gridUnclustered,f=this._featureGroup,g=this._map;if(b)for(var e=this._maxZoom;0<=e&&h[e].removeObject(a,
g.project(a.getLatLng(),e));e--);var e=a.__parent,k;for(this._arraySplice(e._markers,a);e;){e._childCount--;if(0>e._zoom)break;else b&&1>=e._childCount?(k=e._markers[0]===a?e._markers[1]:e._markers[0],d[e._zoom].removeObject(e,g.project(e._cLatLng,e._zoom)),h[e._zoom].addObject(k,g.project(k.getLatLng(),e._zoom)),this._arraySplice(e.__parent._childClusters,e),e.__parent._markers.push(k),k.__parent=e.__parent,e._icon&&(f.removeLayer(e),c||f.addLayer(k))):(e._recalculateBounds(),c&&e._icon||e._updateIcon());
e=e.__parent}delete a.__parent},_propagateEvent:function(a){a.layer instanceof L.MarkerCluster&&(a.type="cluster"+a.type);this.fire(a.type,a)},_defaultIconCreateFunction:function(a){a=a.getChildCount();var b=" marker-cluster-";return new L.DivIcon({html:"<div><span>"+a+"</span></div>",className:"marker-cluster"+(10>a?b+"small":100>a?b+"medium":b+"large"),iconSize:new L.Point(40,40)})},_bindEvents:function(){var a=this._map,b=this.options.showCoverageOnHover,c=this.options.zoomToBoundsOnClick;if(this.options.spiderfyOnMaxZoom||
c)this.on("clusterclick",this._zoomOrSpiderfy,this);b&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),a.on("zoomend",this._hideCoverage,this),a.on("layerremove",this._hideCoverageOnRemove,this))},_zoomOrSpiderfy:function(a){var b=this._map;b.getMaxZoom()===b.getZoom()?this.options.spiderfyOnMaxZoom&&a.layer.spiderfy():this.options.zoomToBoundsOnClick&&a.layer.zoomToBounds()},_showCoverage:function(a){var b=this._map;this._inZoomAnimation||(this._shownPolygon&&
b.removeLayer(this._shownPolygon),2<a.layer.getChildCount()&&a.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(a.layer.getConvexHull(),this.options.polygonOptions),b.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_hideCoverageOnRemove:function(a){a.layer===this&&this._hideCoverage()},_unbindEvents:function(){var a=this.options.showCoverageOnHover,b=this.options.zoomToBoundsOnClick,c=this._map;
(this.options.spiderfyOnMaxZoom||b)&&this.off("clusterclick",this._zoomOrSpiderfy,this);a&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),c.off("zoomend",this._hideCoverage,this),c.off("layerremove",this._hideCoverageOnRemove,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=this._map._zoom,this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var a=this._getExpandedVisibleBounds();
this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,a);this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,a);this._currentShownBounds=a}},_generateInitialClusters:function(){var a=this._map.getMaxZoom(),b=this.options.maxClusterRadius;this.options.disableClusteringAtZoom&&(a=this.options.disableClusteringAtZoom-1);this._maxZoom=a;this._gridClusters={};for(this._gridUnclustered={};0<=a;a--)this._gridClusters[a]=new L.DistanceGrid(b),this._gridUnclustered[a]=
new L.DistanceGrid(b);this._topClusterLevel=new L.MarkerCluster(this,-1)},_addLayer:function(a,b){var c=this._gridClusters,d=this._gridUnclustered,h,f;this.options.singleMarkerMode&&(a.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[a]}}));for(;0<=b;b--){h=this._map.project(a.getLatLng(),b);var g=c[b].getNearObject(h);if(g){g._addChild(a);a.__parent=g;return}if(g=d[b].getNearObject(h)){(h=g.__parent)&&this._removeLayer(g,!1);f=
new L.MarkerCluster(this,b,g,a);c[b].addObject(f,this._map.project(f._cLatLng,b));g.__parent=f;var e=a.__parent=f;for(f=b-1;f>h._zoom;f--)e=new L.MarkerCluster(this,f,e),c[f].addObject(e,this._map.project(g.getLatLng(),f));h._addChild(e);for(f=b;0<=f&&d[f].removeObject(g,this._map.project(g.getLatLng(),f));f--);return}d[b].addObject(a,h)}this._topClusterLevel._addChild(a);a.__parent=this._topClusterLevel},_mergeSplitClusters:function(){this._zoom<this._map._zoom?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,
this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,this._map._zoom)):this._zoom>this._map._zoom?(this._animationStart(),this._animationZoomOut(this._zoom,this._map._zoom)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds)return this.getBounds();var a=this._map.getBounds(),b=a._southWest,a=a._northEast,c=L.Browser.mobile?0:Math.abs(b.lat-a.lat),d=L.Browser.mobile?0:Math.abs(b.lng-a.lng);return new L.LatLngBounds(new L.LatLng(b.lat-
c,b.lng-d,!0),new L.LatLng(a.lat+c,a.lng+d,!0))},_animationAddLayerNonAnimated:function(a,b){if(b===a)this._featureGroup.addLayer(a);else if(2===b._childCount){b._addToMap();var c=b.getAllChildMarkers();this._featureGroup.removeLayer(c[0]);this._featureGroup.removeLayer(c[1])}else b._updateIcon()}});L.MarkerClusterGroup.include(L.DomUtil.TRANSITION?{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim";this._inZoomAnimation++},_animationEnd:function(){this._map&&(this._map._mapPane.className=
this._map._mapPane.className.replace(" leaflet-cluster-anim",""));this._inZoomAnimation--;this.fire("animationend")},_animationZoomIn:function(a,b){var c=this,d=this._getExpandedVisibleBounds(),h=this._featureGroup,f;this._topClusterLevel._recursively(d,a,0,function(c){var e=c._latlng,k=c._markers;d.contains(e)||(e=null);c._isSingleParent()&&a+1===b?(h.removeLayer(c),c._recursivelyAddChildrenToMap(null,b,d)):(c.setOpacity(0),c._recursivelyAddChildrenToMap(e,b,d));for(f=k.length-1;0<=f;f--)c=k[f],
d.contains(c._latlng)||h.removeLayer(c)});this._forceLayout();c._topClusterLevel._recursivelyBecomeVisible(d,b);h.eachLayer(function(a){a instanceof L.MarkerCluster||!a._icon||a.setOpacity(1)});c._topClusterLevel._recursively(d,a,b,function(a){a._recursivelyRestoreChildPositions(b)});setTimeout(function(){c._topClusterLevel._recursively(d,a,0,function(a){h.removeLayer(a);a.setOpacity(1)});c._animationEnd()},200)},_animationZoomOut:function(a,b){this._animationZoomOutSingle(this._topClusterLevel,a-
1,b);this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds());this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,a,this._getExpandedVisibleBounds())},_animationZoomOutSingle:function(a,b,c){var d=this._getExpandedVisibleBounds();a._recursivelyAnimateChildrenInAndAddSelfToMap(d,b+1,c);var h=this;this._forceLayout();a._recursivelyBecomeVisible(d,c);setTimeout(function(){if(1===a._childCount){var f=a._markers[0];f.setLatLng(f.getLatLng());
f.setOpacity(1)}else a._recursively(d,c,0,function(a){a._recursivelyRemoveChildrenFromMap(d,b+1)});h._animationEnd()},200)},_animationAddLayer:function(a,b){var c=this,d=this._featureGroup;d.addLayer(a);b!==a&&(2<b._childCount?(b._updateIcon(),this._forceLayout(),this._animationStart(),a._setPos(this._map.latLngToLayerPoint(b.getLatLng())),a.setOpacity(0),setTimeout(function(){d.removeLayer(a);a.setOpacity(1);c._animationEnd()},200)):(this._forceLayout(),c._animationStart(),c._animationZoomOutSingle(b,
this._map.getMaxZoom(),this._map.getZoom())))},_forceLayout:function(){L.Util.falseFn(m.body.offsetWidth)}}:{_animationStart:function(){},_animationZoomIn:function(a,b){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,a);this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds())},_animationZoomOut:function(a,b){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,a);this._topClusterLevel._recursivelyAddChildrenToMap(null,
b,this._getExpandedVisibleBounds())},_animationAddLayer:function(a,b){this._animationAddLayerNonAnimated(a,b)}});L.markerClusterGroup=function(a){return new L.MarkerClusterGroup(a)};L.MarkerCluster=L.Marker.extend({initialize:function(a,b,c,d){L.Marker.prototype.initialize.call(this,c?c._cLatLng||c.getLatLng():new L.LatLng(0,0),{icon:this});this._group=a;this._zoom=b;this._markers=[];this._childClusters=[];this._childCount=0;this._iconNeedsUpdate=!0;this._bounds=new L.LatLngBounds;c&&this._addChild(c);
d&&this._addChild(d)},getAllChildMarkers:function(a){a=a||[];for(var b=this._childClusters.length-1;0<=b;b--)this._childClusters[b].getAllChildMarkers(a);for(b=this._markers.length-1;0<=b;b--)a.push(this._markers[b]);return a},getChildCount:function(){return this._childCount},zoomToBounds:function(){this._group._map.fitBounds(this._bounds)},getBounds:function(){var a=new L.LatLngBounds;a.extend(this._bounds);return a},_updateIcon:function(){this._iconNeedsUpdate=!0;this._icon&&this.setIcon(this)},
createIcon:function(){this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1);return this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(a,b){this._iconNeedsUpdate=!0;this._expandBounds(a);a instanceof L.MarkerCluster?(b||(this._childClusters.push(a),a.__parent=this),this._childCount+=a._childCount):(b||this._markers.push(a),this._childCount++);this.__parent&&this.__parent._addChild(a,!0)},
_expandBounds:function(a){var b,c=a._wLatLng||a._latlng;a instanceof L.MarkerCluster?(this._bounds.extend(a._bounds),b=a._childCount):(this._bounds.extend(c),b=1);this._cLatLng||(this._cLatLng=a._cLatLng||c);a=this._childCount+b;this._wLatLng?(this._wLatLng.lat=(c.lat*b+this._wLatLng.lat*this._childCount)/a,this._wLatLng.lng=(c.lng*b+this._wLatLng.lng*this._childCount)/a):this._latlng=this._wLatLng=new L.LatLng(c.lat,c.lng)},_addToMap:function(a){a&&(this._backupLatlng=this._latlng,this.setLatLng(a));
this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(a,b,c){this._recursively(a,0,c-1,function(a){a=a._markers;var c,f;for(c=a.length-1;0<=c;c--)f=a[c],f._icon&&(f._setPos(b),f.setOpacity(0))},function(a){a=a._childClusters;var c,f;for(c=a.length-1;0<=c;c--)f=a[c],f._icon&&(f._setPos(b),f.setOpacity(0))})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(a,b,c){this._recursively(a,c,0,function(d){d._recursivelyAnimateChildrenIn(a,d._group._map.latLngToLayerPoint(d.getLatLng()).round(),
b);d._isSingleParent()&&b-1===c?(d.setOpacity(1),d._recursivelyRemoveChildrenFromMap(a,b)):d.setOpacity(0);d._addToMap()})},_recursivelyBecomeVisible:function(a,b){this._recursively(a,0,b,null,function(a){a.setOpacity(1)})},_recursivelyAddChildrenToMap:function(a,b,c){this._recursively(c,-1,b,function(d){if(b!==d._zoom)for(var h=d._markers.length-1;0<=h;h--){var f=d._markers[h];c.contains(f._latlng)&&(a&&(f._backupLatlng=f.getLatLng(),f.setLatLng(a),f.setOpacity&&f.setOpacity(0)),d._group._featureGroup.addLayer(f))}},
function(b){b._addToMap(a)})},_recursivelyRestoreChildPositions:function(a){for(var b=this._markers.length-1;0<=b;b--){var c=this._markers[b];c._backupLatlng&&(c.setLatLng(c._backupLatlng),delete c._backupLatlng)}if(a-1===this._zoom)for(a=this._childClusters.length-1;0<=a;a--)this._childClusters[a]._restorePosition();else for(b=this._childClusters.length-1;0<=b;b--)this._childClusters[b]._recursivelyRestoreChildPositions(a)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),
delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(a,b,c){var d,h;this._recursively(a,-1,b-1,function(a){for(h=a._markers.length-1;0<=h;h--)d=a._markers[h],c&&c.contains(d._latlng)||(a._group._featureGroup.removeLayer(d),d.setOpacity&&d.setOpacity(1))},function(a){for(h=a._childClusters.length-1;0<=h;h--)d=a._childClusters[h],c&&c.contains(d._latlng)||(a._group._featureGroup.removeLayer(d),d.setOpacity&&d.setOpacity(1))})},_recursively:function(a,b,c,d,h){var f=this._childClusters,
g=this._zoom,e;if(b>g)for(g=f.length-1;0<=g;g--)e=f[g],a.intersects(e._bounds)&&e._recursively(a,b,c,d,h);else if(d&&d(this),h&&this._zoom===c&&h(this),c>g)for(g=f.length-1;0<=g;g--)e=f[g],a.intersects(e._bounds)&&e._recursively(a,b,c,d,h)},_recalculateBounds:function(){var a=this._markers,b=this._childClusters,c;this._bounds=new L.LatLngBounds;delete this._wLatLng;for(c=a.length-1;0<=c;c--)this._expandBounds(a[c]);for(c=b.length-1;0<=c;c--)this._expandBounds(b[c])},_isSingleParent:function(){return 0<
this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.DistanceGrid=function(a){this._cellSize=a;this._sqCellSize=a*a;this._grid={};this._objectPoint={}};L.DistanceGrid.prototype={addObject:function(a,b){var c=this._getCoord(b.x),d=this._getCoord(b.y),h=this._grid,d=h[d]=h[d]||{},c=d[c]=d[c]||[],d=L.Util.stamp(a);this._objectPoint[d]=b;c.push(a)},updateObject:function(a,b){this.removeObject(a);this.addObject(a,b)},removeObject:function(a,b){var c=this._getCoord(b.x),
d=this._getCoord(b.y),h=this._grid,d=h[d]=h[d]||{},h=d[c]=d[c]||[],f,g;delete this._objectPoint[L.Util.stamp(a)];f=0;for(g=h.length;f<g;f++)if(h[f]===a)return h.splice(f,1),1===g&&delete d[c],!0},eachObject:function(a,b){var c,d,h,f,g,e,k,l=this._grid;for(c in l)for(d in g=l[c],g)for(e=g[d],h=0,f=e.length;h<f;h++)if(k=a.call(b,e[h]))h--,f--},getNearObject:function(a){var b=this._getCoord(a.x),c=this._getCoord(a.y),d,h,f,g,e,k,l,m,q=this._objectPoint,n=this._sqCellSize,p=null;for(d=c-1;d<=c+1;d++)if(g=
this._grid[d])for(h=b-1;h<=b+1;h++)if(e=g[h])for(f=0,k=e.length;f<k;f++)l=e[f],m=this._sqDist(q[L.Util.stamp(l)],a),m<n&&(n=m,p=l);return p},_getCoord:function(a){return Math.floor(a/this._cellSize)},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d}};(function(){L.QuickHull={getDistant:function(a,b){return(b[0].lng-b[1].lng)*(a.lat-b[0].lat)+(b[1].lat-b[0].lat)*(a.lng-b[0].lng)},findMostDistantPointFromBaseLine:function(a,b){var c=0,d=null,h=[],f,g,e;for(f=b.length-1;0<=f;f--)g=b[f],e=
this.getDistant(g,a),0<e&&(h.push(g),e>c&&(c=e,d=g));return{maxPoint:d,newPoints:h}},buildConvexHull:function(a,b){var c=[],d=this.findMostDistantPointFromBaseLine(a,b);return d.maxPoint?(c=c.concat(this.buildConvexHull([a[0],d.maxPoint],d.newPoints)),c=c.concat(this.buildConvexHull([d.maxPoint,a[1]],d.newPoints))):[a]},getConvexHull:function(a){var b=!1,c=!1,d=null,h=null,f;for(f=a.length-1;0<=f;f--){var g=a[f];if(!1===b||g.lat>b)d=g,b=g.lat;if(!1===c||g.lat<c)h=g,c=g.lat}return[].concat(this.buildConvexHull([h,
d],a),this.buildConvexHull([d,h],a))}}})();L.MarkerCluster.include({getConvexHull:function(){var a=this.getAllChildMarkers(),b=[],c=[],d,h;for(h=a.length-1;0<=h;h--)d=a[h].getLatLng(),b.push(d);a=L.QuickHull.getConvexHull(b);for(h=a.length-1;0<=h;h--)c.push(a[h][0]);return c}});L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==
this&&!this._group._inZoomAnimation){var a=this.getAllChildMarkers(),b=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy();this._group._spiderfied=this;a.length>=this._circleSpiralSwitchover?b=this._generatePointsSpiral(a.length,b):(b.y+=10,b=this._generatePointsCircle(a.length,b));this._animationSpiderfy(a,b)}},unspiderfy:function(a){this._group._inZoomAnimation||(this._animationUnspiderfy(a),this._group._spiderfied=null)},_generatePointsCircle:function(a,b){var c=this._group.options.spiderfyDistanceMultiplier*
this._circleFootSeparation*(2+a)/this._2PI,d=this._2PI/a,h=[],f,g;h.length=a;for(f=a-1;0<=f;f--)g=this._circleStartAngle+f*d,h[f]=(new L.Point(b.x+c*Math.cos(g),b.y+c*Math.sin(g)))._round();return h},_generatePointsSpiral:function(a,b){var c=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthStart,d=this._group.options.spiderfyDistanceMultiplier*this._spiralFootSeparation,h=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthFactor,f=0,g=[],e;g.length=a;for(e=a-1;0<=e;e--)f+=
d/c+5E-4*e,g[e]=(new L.Point(b.x+c*Math.cos(f),b.y+c*Math.sin(f)))._round(),c+=this._2PI*h/f;return g},_noanimationUnspiderfy:function(){var a=this._group,b=a._map,a=a._featureGroup,c=this.getAllChildMarkers(),d,h;this.setOpacity(1);for(h=c.length-1;0<=h;h--)d=c[h],a.removeLayer(d),d._preSpiderfyLatlng&&(d.setLatLng(d._preSpiderfyLatlng),delete d._preSpiderfyLatlng),d.setZIndexOffset&&d.setZIndexOffset(0),d._spiderLeg&&(b.removeLayer(d._spiderLeg),delete d._spiderLeg)}});L.MarkerCluster.include(L.DomUtil.TRANSITION?
{SVG_ANIMATION:-1<m.createElementNS("http://www.w3.org/2000/svg","animate").toString().indexOf("SVGAnimate"),_animationSpiderfy:function(a,b){var c=this._group,d=c._map,h=c._featureGroup,f=d.latLngToLayerPoint(this._latlng),g,e,k;for(g=a.length-1;0<=g;g--)e=a[g],e.setOpacity?(e.setZIndexOffset(1E6),e.setOpacity(0),h.addLayer(e),e._setPos(f)):h.addLayer(e);c._forceLayout();c._animationStart();h=L.Path.SVG?0:0.3;f=L.Path.SVG_NS;for(g=a.length-1;0<=g;g--)if(k=d.layerPointToLatLng(b[g]),e=a[g],e._preSpiderfyLatlng=
e._latlng,e.setLatLng(k),e.setOpacity&&e.setOpacity(1),k=new L.Polyline([this._latlng,k],{weight:1.5,color:"#222",opacity:h}),d.addLayer(k),e._spiderLeg=k,L.Path.SVG&&this.SVG_ANIMATION){e=k._path.getTotalLength();k._path.setAttribute("stroke-dasharray",e+","+e);var l=m.createElementNS(f,"animate");l.setAttribute("attributeName","stroke-dashoffset");l.setAttribute("begin","indefinite");l.setAttribute("from",e);l.setAttribute("to",0);l.setAttribute("dur",0.25);k._path.appendChild(l);l.beginElement();
l=m.createElementNS(f,"animate");l.setAttribute("attributeName","stroke-opacity");l.setAttribute("attributeName","stroke-opacity");l.setAttribute("begin","indefinite");l.setAttribute("from",0);l.setAttribute("to",0.5);l.setAttribute("dur",0.25);k._path.appendChild(l);l.beginElement()}this.setOpacity(0.3);if(L.Path.SVG)for(this._group._forceLayout(),g=a.length-1;0<=g;g--)e=a[g]._spiderLeg,e.options.opacity=0.5,e._path.setAttribute("stroke-opacity",0.5);setTimeout(function(){c._animationEnd();c.fire("spiderfied")},
200)},_animationUnspiderfy:function(a){var b=this._group,c=b._map,d=b._featureGroup;a=a?c._latLngToNewLayerPoint(this._latlng,a.zoom,a.center):c.latLngToLayerPoint(this._latlng);var h=this.getAllChildMarkers(),f=L.Path.SVG&&this.SVG_ANIMATION,g,e,k;b._animationStart();this.setOpacity(1);for(e=h.length-1;0<=e;e--)g=h[e],g._preSpiderfyLatlng&&(g.setLatLng(g._preSpiderfyLatlng),delete g._preSpiderfyLatlng,g.setOpacity?(g._setPos(a),g.setOpacity(0)):d.removeLayer(g),f&&(k=g._spiderLeg._path.childNodes[0],
k.setAttribute("to",k.getAttribute("from")),k.setAttribute("from",0),k.beginElement(),k=g._spiderLeg._path.childNodes[1],k.setAttribute("from",0.5),k.setAttribute("to",0),k.setAttribute("stroke-opacity",0),k.beginElement(),g._spiderLeg._path.setAttribute("stroke-opacity",0)));setTimeout(function(){var a=0;for(e=h.length-1;0<=e;e--)g=h[e],g._spiderLeg&&a++;for(e=h.length-1;0<=e;e--)g=h[e],g._spiderLeg&&(g.setOpacity&&(g.setOpacity(1),g.setZIndexOffset(0)),1<a&&d.removeLayer(g),c.removeLayer(g._spiderLeg),
delete g._spiderLeg);b._animationEnd()},200)}}:{_animationSpiderfy:function(a,b){var c=this._group,d=c._map,h=c._featureGroup,f,g,e;for(f=a.length-1;0<=f;f--)e=d.layerPointToLatLng(b[f]),g=a[f],g._preSpiderfyLatlng=g._latlng,g.setLatLng(e),g.setZIndexOffset&&g.setZIndexOffset(1E6),h.addLayer(g),e=new L.Polyline([this._latlng,e],{weight:1.5,color:"#222"}),d.addLayer(e),g._spiderLeg=e;this.setOpacity(0.3);c.fire("spiderfied")},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}});L.MarkerClusterGroup.include({_spiderfied:null,
_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this);if(this._map.options.zoomAnimation)this._map.on("zoomstart",this._unspiderfyZoomStart,this);else this._map.on("zoomend",this._unspiderfyWrapper,this);L.Path.SVG&&!L.Browser.touch&&this._map._initPathRoot()},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this);this._map.off("zoomstart",this._unspiderfyZoomStart,this);this._map.off("zoomanim",this._unspiderfyZoomAnim,this);this._unspiderfy()},
_unspiderfyZoomStart:function(){if(this._map)this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(a){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(a))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(a){this._spiderfied&&this._spiderfied.unspiderfy(a)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(a){a._spiderLeg&&
(this._featureGroup.removeLayer(a),a.setOpacity(1),a.setZIndexOffset(0),this._map.removeLayer(a._spiderLeg),delete a._spiderLeg)}})})(window,document);